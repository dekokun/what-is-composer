<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8">

  <title>Composerとは</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/default.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
    document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<section data-markdown="">
  # Composer


  倉知真太郎
</section>

<section data-markdown>
  ## 自己紹介
  * 倉知 真太郎
  * システム管理部ベースライブラリグループ
  * twitter : @dekokun
  * PHP Lover
  * Haskell Lover
</section>

<section data-markdown>
  ## お仕事
  * Android,iOSへのPUSH配信システム作成チームの1人
  * 皆さんPUSH配信しましょう
  * メール配信システム、PictureFitterも運用してます
</section>

<section data-markdown>
  ### なぜ発表をしようと思ったか
  1. Composerが便利だと聞いていた
  1. 個人プロジェクトで使ってみたら便利だった
  1. 今後外部ライブラリ管理の主流になりそう
  1. 皆、知識だけでも持っているべきだと思った
</section>

<section data-markdown>
  ### この発表内容が役立つのは
  * Composerが何なのか知らない人
  * 名前は知ってるけども触ったことがない人
</section>

<section data-markdown>
  ### この発表の目的は
  * 参加者がComposerの存在を知ること
  * 参加者がComposerの概略をつかむこと
</section>

<section data-markdown>
  ### すでによくご存知の方へ
  * すみません
  * でも、嬉しい
  * ツッコミ歓迎
</section>

<section data-markdown>
  ### 突然ですが
  * 外部ライブラリ、使ってますか？
</section>

<section data-markdown>
  ### 車輪の再発明は防ぎたい
  * Services_Twitter
  * PHPUnit
</section>

<section data-markdown>
  ### Composer登場以前
  * 外部ライブラリの管理方法はたいていPear
  * こんなことに困ったことはないですか？
</section>

<section>
  <ul>
    <li><small>デプロイ前にすべき外部ライブラリのインストールをせずにデプロイ…</small></li>
    <li><small>サーバ増設の際に現在使っている外部ライブラリのバージョン調査…</small></li>
    <li><small>開発メンバが各々PCに勝手に必要ライブラリを入れるため<br>ライブラリのバージョンが揃わない…</small></li>
    <li><small>あるシステムのためにライブラリのバージョンをあげたら<br>同じサーバで動いていた別のシステムが動かなくなった…</small></li>
    <li><small>使用ライブラリが増え過ぎてrequire_once地獄…</small></li>
    <li><small>使用ライブラリのrequire漏れのページが…</small></li>
    <li><small>外部ライブラリのアップデートが面倒…</small></li>
  </ul>
</section>

<section data-markdown>
  ### ここが問題
  * ソースコードと一緒に外部ライブラリをGit,SVNなどで管理可能にする仕組み
  * プロジェクト毎に外部ライブラリのバージョンを固定できる仕組み
  * require地獄にならない仕組み
  * ライブラリ間の依存関係の解決ができる仕組み
</section>

<section data-markdown>
  ### こういうのが欲しい
  * ソースコードと一緒に外部ライブラリをGit,SVNなどで管理可能にする仕組み
  * プロジェクト毎に外部ライブラリのバージョンを固定できる仕組み
  * require地獄にならない仕組み
  * ライブラリ間の依存関係の解決ができる仕組み
</section>

<section data-markdown>
  ### Rubyistによる嘲笑
  * それ、Bundlerでできるよ！
  * これだからPHPerは…
</section>

<section data-markdown>
  ### 他の言語達による追従
  * npmでできるよ！(Node.js)
  * Cartonでできるよ！(Perl)
  * Cabal(-dev)でできるよ！(Haskell)
</section>

<section data-markdown>
  ### PHPによる反撃
  * PHPにはComposerがある！！
  * それ、Composerでできるよ！
</section>

<section data-markdown>
  ### Composer概説
  * jsonファイルで外部ライブラリを管理
  * プロジェクトメンバーでバージョンの共有可能
  * 外部ライブラリをローカルにインストール
  * autoloadファイルを1つだけrequireすればよい
</section>

<section data-markdown>
  ### デモ
</section>

<section>
  <h3>jsonファイルで<br>外部ライブラリを管理</h3>
    <pre><code contenteditable>
{
  "require": {
    "phpunit/phpunit": "3.7.*"
  }
}
    </code></pre>

</section>

<section>
  <h3>requireの仕方</h3>
  <pre><code contenteditable>
    require_once APP_HOME . '/vendor/autoload.php';
  </code></pre>
  <p>これですべてのライブラリが読み込まれます</p>

</section>

<section data-markdown>
  ### もう一度困りごとを見てみよう
</section>

<section data-markdown>
  ### デプロイとの絡め方
  * デプロイのたびにcomposer install
  * これによりinstall漏れなどがなくなる
  * テスト環境で動けば本番環境でも動くことが<br>保証される
</section>

<section data-markdown>
  ### デモ
</section>

<section data-markdown>
  ### Composerを採用しているプロジェクト
  * FuelPHP
  * Symfony
  * Zend Framework
</section>

<section data-markdown>
  ### 制約
  * PHP5.3.2以上
  * 実行サーバにgitが必要
  * detect_unicodeをoffにする必要あり
</section>

<section data-markdown>
  ### 欠点
  * デプロイ時の障害点が増える
  * デプロイに時間がかかる

  上記より、vender下は最終的には<br>コミットしてしまったほうがいいかもしれない
</section>
</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
    transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

    // Optional libraries used to extend on reveal.js
    dependencies: [
      { src: 'lib/js/classList.js', condition: function () {
        return !document.body.classList;
      } },
      { src: 'plugin/markdown/showdown.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      } },
      { src: 'plugin/markdown/markdown.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
        hljs.initHighlightingOnLoad();
      } },
      { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
        return !!document.body.classList;
      } },
      { src: 'plugin/notes/notes.js', async: true, condition: function () {
        return !!document.body.classList;
      } }
      // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
    ]
  });

</script>

</body>
</html>
